<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" itemscope itemtype="https://schema.org/WebPage">
<head>
<title>CalcEngine</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="docs_manual.css">
</head>
<body><script type="text/javascript" src="highlight.js"></script>
<script type="text/javascript">
	function highlightStart() { highlight(); }
	document.body.onload = highlightStart;
</script>

<div id="header">
	<div class="logo"><a href ="Top.html"><img src="ADT_LOGO.png" width="100" height="54" alt="A&amp;D Technology"/></a></div>
	<div class="name">iTest User's Guide</div>
	<div id="search-div">
		<form method="get" action="search.html">
			<input type="text" name="zoom_query" size="20" />
			<input type="submit" class="searchbutton" value="Search" />
		</form>
	</div>
</div>
<div class="clear"></div>
<div class="line-blue"></div><ul id="breadcrumb" >
<li><a href="Top.html">Home</a></li>
<li><a href="Standalone_Tools.html">Standalone Tools</a></li>
<li><a href="CalcEngine.html">CalcEngine</a></li>
</ul>
</div>

<div class="trail"></div>

<a name="CalcEngine"></a>
<h1 >CalcEngine<a href="#CalcEngine" class="wiki-anchor">&para;</a></h1>


	<ul class="toc right"><li><strong>Table of contents</strong></li><li><a href="#CalcEngine">CalcEngine</a><ul><li><a href="#Overview">Overview</a></li><li><a href="#CalcEngine-Details">CalcEngine Details</a></li><li><a href="#Starting-and-Stopping-CalcEngine">Starting and Stopping CalcEngine</a></li><li><a href="#Synchronization-with-vxin_exec">Synchronization with vxin_exec</a></li></ul></li></ul>


	<a name="Overview"></a>
<h2 >Overview<a href="#Overview" class="wiki-anchor">&para;</a></h2>


	<p>CalcEngine is an executable that processes dynamic calculations. These are calculations that run independently and asynchronously to the real-time system; therefore, these can be modified at runtime without having to pause the rest of the running processes. CalcEngine does, by default, synchronize its update rate with vxin_exec in order to minimize any time-alignment issues between the values generated by CalcEngine versus those generated from vxin_exec. However, there can still be a slight misalignment, so dynamic calculations should only be used for lower priority calculations that are tolerant of slight time shifts in their results.</p>


	<a name="CalcEngine-Details"></a>
<h2 >CalcEngine Details<a href="#CalcEngine-Details" class="wiki-anchor">&para;</a></h2>


	<p>The runtime application that executes these calculations is called <em>CalcEngine.exe</em> (for Win32) and <em>CalcEngine_rtXX.rta</em> (for INtime).</p>


	<ul>
	<li>CalcEngine processes the calculations at the same rate as the defined System Scan Rate; however, the maximum rate supported is 100 Hz.</li>
		<li>CalcEngine runs asynchronously with the real-time system.</li>
		<li>CalcEngine will process only one active calculation file.</li>
		<li>Test Manager will allow multiple dynamic calculation files to be created, but only one can be active.</li>
	</ul>


	<table>
		<tr>
			<td style="background:#336699;"></td>
			<td style="vertical-align:top;"><img src="attachments/download/3553/Notepad.png" alt="" /></td>
			<td style="vertical-align:top;"><b>NOTE:</b></td>
			<td style="vertical-align:top;">Upon saving a dynamic calculation in either Test Manager or FlexEdit, an additional <em>.xml</em> file is generated. This file is only used for LabCalc.</td>
		</tr>
	</table>




	<a name="Starting-and-Stopping-CalcEngine"></a>
<h2 >Starting and Stopping CalcEngine<a href="#Starting-and-Stopping-CalcEngine" class="wiki-anchor">&para;</a></h2>


	<p>CalcEngine can be started when iTest starts by adding the EXE to <code>PreLoad</code> in <em>powertek.ini</em> or by adding the RTA to <code>RTXPreload</code>. For example, add <em>\\calcengine.exe>></em> to the <code>Preload</code> string in <em>powertek.ini</em> to have CalcEngine running at start-up. For starting the real-time CalcEngine, the executable is added to the <code>RTXPreload</code> option; however, the exact name to use depends on your version of INtime. See the <a class="wiki-page" href="INtime_Extensions.html">INtime Extensions</a> document to understand which executable extensions are applicable for your RT-OS version.</p>


	<p>Alternatively, use the following two mailslot commands to Data_Engine to start and stop CalcEngine at runtime without preloading the executable.</p>


	<ul>
	<li><code>CalcEngine Start</code></li>
		<li><code>CalcEngine Stop</code></li>
	</ul>


	<p>If your RT-OS version is INtime 4.2 or later, you may specify the CPU node to run on (e.g., <em>\\CalcEngine.rta -nNodeA>></em>) in the <code>RTXPreload</code> string or in the mailslot command.</p>


	<a name="Synchronization-with-vxin_exec"></a>
<h2 >Synchronization with vxin_exec<a href="#Synchronization-with-vxin_exec" class="wiki-anchor">&para;</a></h2>


	<p>CalcEngine synchronizes its update rate with vxin_exec in order to produce consistent values except under the following situations:</p>


	<ol>
	<li>The <code>CalcEngScanRateHz</code> <em>powertek.ini</em> setting is present and does not equal the <code>SystemScanRateHz</code> setting.</li>
		<li>The system type is distributed, but <em>CalcEngine.exe</em> is used.</li>
	</ol>


	<table>
		<tr>
			<td style="background:#336699;"></td>
			<td style="vertical-align:top;"><img src="attachments/download/3553/Notepad.png" alt="" /></td>
			<td style="vertical-align:top;"><b>NOTE:</b></td>
			<td style="vertical-align:top;">Even with synchronization there may be some discrepancies in the calculation results, where vxin_exec may trigger a second event in the trigger queue before CalcEngine resets it. This can happen if higher priority processes and threads are preventing CalcEngine from running in time.</td>
		</tr>
	</table>




	<p>&nbsp;</p>
</body>
</html>
