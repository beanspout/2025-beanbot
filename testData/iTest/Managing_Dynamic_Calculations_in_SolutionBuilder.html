<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" itemscope itemtype="https://schema.org/WebPage">
<head>
<title>Managing Dynamic Calculations in SolutionBuilder</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="docs_manual.css">
</head>
<body><script type="text/javascript" src="highlight.js"></script>
<script type="text/javascript">
	function highlightStart() { highlight(); }
	document.body.onload = highlightStart;
</script>

<div id="header">
	<div class="logo"><a href ="Top.html"><img src="ADT_LOGO.png" width="100" height="54" alt="A&amp;D Technology"/></a></div>
	<div class="name">iTest User's Guide</div>
	<div id="search-div">
		<form method="get" action="search.html">
			<input type="text" name="zoom_query" size="20" />
			<input type="submit" class="searchbutton" value="Search" />
		</form>
	</div>
</div>
<div class="clear"></div>
<div class="line-blue"></div><ul id="breadcrumb" >
<li><a href="Top.html">Home</a></li>
<li><a href="Developer_Tools.html">Developer Tools</a></li>
<li><a href="Managing_Dynamic_Calculations_in_SolutionBuilder.html">Managing Dynamic Calculations in SolutionBuilder</a></li>
</ul>
</div>

<div class="trail"></div>

<a name="Managing-Dynamic-Calculations"></a>
<h1 >Managing Dynamic Calculations<a href="#Managing-Dynamic-Calculations" class="wiki-anchor">&para;</a></h1>


	<ul class="toc right"><li><strong>Table of contents</strong></li><li><a href="#Managing-Dynamic-Calculations">Managing Dynamic Calculations</a><ul><li><a href="#Overview">Overview</a></li><li><a href="#Using-the-Dynamic-Calculations-Editor">Using the Dynamic Calculations Editor</a></li><li><a href="#Creating-New-Dynamic-Calculations">Creating New Dynamic Calculations</a><ul><li><a href="#Editing-Formulas">Editing Formulas</a></li></ul></li></ul></li></ul>


	<a name="Overview"></a>
<h2 >Overview<a href="#Overview" class="wiki-anchor">&para;</a></h2>


	<p>Dynamic calculations run independently and asynchronously to the real-time system as they are processed by separate executables. This enables you to perform modifications to the calculation file while it is actively running without affecting the system or causing a full rebuild. Test Manager and SolutionBuilder support the creation of multiple dynamic calculation files, but only ten may be active at a given time. The <em>CalcEngine</em> application executes the dynamic calculations and processes them at system scan rate.</p>


	<p>Dynamic calculations support the following channel types:</p>


	<ul>
	<li>Virtual Output</li>
		<li>Analog Input</li>
		<li>Analog Output</li>
		<li>Digital Output</li>
		<li>PWM Output</li>
	</ul>


	<p><table>
		<tr>
			<td style="background:#336699;"></td>
			<td style="vertical-align:top;"><img src="attachments/download/3553/Notepad.png" alt="" /></td>
			<td style="vertical-align:top;"><b>NOTE:</b></td>
			<td style="vertical-align:top;">The use of string channels is not supported.</td>
		</tr>
	</table></p>


	<p>To use dynamic calculations, the CalcEngine application can be configured to initiate upon startup. To do so, edit the <em>powertek.ini</em> file in the $SUPPORTDIR with the following additions:</p>


	<p style="font-size: 11px;margin-left: 3em;"><em><strong>CalcEngine Configuration Settings</strong></em></p>


	<table style="margin-left: 2.5em;">
		<tr style="padding-bottom:1em;background:#cccaca;">
			<td style="width:120px;text-align:left;"><strong>Operating System</strong> </td>
			<td style="text-align:left;"><strong>Description</strong> </td>
		</tr>
		<tr>
			<td>Windows</td>
			<td>Add \\calcengine.exe>> to the <code>Preload=</code> entry.</td>
		</tr>
		<tr>
			<td>INtime</td>
			<td> Add\\calcengine.rta>> to the <code>RTxPreload=</code> entry.</td>
		</tr>
	</table>




	<p>For INtime, the name used is dependent on the system version. For more information, refer to the <a class="wiki-page" href="INtime_Extensions.html">INtime Extensions</a> documentation to determine which RTA file to use. For INtime >= 4.2, specify the CPU node on which to run (e.g., <em>\\CalcEngine.rta -nNodeA>></em>). <em>CalcEngine.rta</em> may be (re)started with a mailslot to data_engine (e.g., "CalcEngine Start" or "CalcEngine Start -nNodeA").</p></p>


	<a name="Using-the-Dynamic-Calculations-Editor"></a>
<h2 >Using the Dynamic Calculations Editor<a href="#Using-the-Dynamic-Calculations-Editor" class="wiki-anchor">&para;</a></h2>


	<p>To manage dynamic calculations in SolutionBuilder, select <strong>Tests > Dynamic Calculations</strong> from SolutionBuilder's main menu to open the Dynamic Calculations editor. The Dynamic Calculations editor contains three sections: the list of dynamic calculations, the helper bar, and the editing area.</p>


	<p><span style="font-size: 11px;padding-left: 3em;"> <em><strong>Dynamic Calculations Editor</strong></em></span><br /><img src="attachments/download/127063/44_DynamicCalculationsEditor.png" style="padding-top:0.5em;padding-bottom:1em;padding-left: 2.30em;" alt="" /><br />&nbsp;</p>


	<p>The following right-click options are available:</p>


	<p style="font-size: 11px;margin-left: 3em;"><em><strong>Right-Click Options</strong></em></p>


	<table style="margin-left: 2.5em;width: 800px;">
		<tr style="padding-bottom:1em;background:#cccaca;">
			<td style="text-align:left;"><strong>Option</strong></td>
			<td style="text-align:left;"><strong>Description</strong></td>
		</tr>
		<tr style="background:#ededed;">
			<th style="text-align:center;" colspan="2">List of Dynamic Calculations</th>
		</tr>
		<tr>
			<td>Add</td>
			<td> Adds a new dynamic calculation. For more information, refer to the <a class="wiki-page" href="#Creating-New-Dynamic-Calculations">Creating New Dynamic Calculations</a> section.</td>
		</tr>
		<tr>
			<td>Remove</td>
			<td> Removes the selected dynamic calculation.</td>
		</tr>
		<tr>
			<td>Rename...</td>
			<td> Launches the Rename dialog, which allows you to rename the dynamic calculation.</td>
		</tr>
		<tr>
			<td>Duplicate</td>
			<td> Duplicates the selected dynamic calculation.</td>
		</tr>
		<tr>
			<td>Undo</td>
			<td> Undoes the last action.</td>
		</tr>
		<tr>
			<td>Redo</td>
			<td> Redoes the last undone action.</td>
		</tr>
		<tr>
			<td>Active</td>
			<td> Activates the dynamic calculation. When iTest is initialized, the active dynamic calculation file is automatically compiled and executed. Inactive dynamic calculations are displayed in gray font in the list.</td>
		</tr>
		<tr style="background:#ededed;">
			<th style="text-align:center;" colspan="2">Editing Area</th>
		</tr>
		<tr>
			<td>Insert Before</td>
			<td> Inserts a new row for the dynamic calculation before the highlighted row.</td>
		</tr>
		<tr>
			<td>Add to End</td>
			<td> Adds a new row to the end of the dynamic calculation.</td>
		</tr>
		<tr>
			<td>Delete</td>
			<td> Deletes the selected row.</td>
		</tr>
		<tr>
			<td>Move Up</td>
			<td> Moves the selected row up.</td>
		</tr>
		<tr>
			<td>Move Down</td>
			<td> Moves the selected row down.</td>
		</tr>
		<tr>
			<td>Copy</td>
			<td> Copies the cell value to the clipboard.</td>
		</tr>
		<tr>
			<td>Paste</td>
			<td> Pastes the copied value.</td>
		</tr>
		<tr>
			<td>Undo</td>
			<td> Undoes the last action.</td>
		</tr>
		<tr>
			<td>Redo</td>
			<td> Redoes the last undone action.</td>
		</tr>
		<tr>
			<td>Insert Channel*</td>
			<td> Launches the Channel Selection dialog, which allows you to select a channel for the formula.</td>
		</tr>
		<tr>
			<td>Insert Function*</td>
			<td> Launches the Dynamic Calculation VCL Functions dialog, which allows you to select a function for the formula.</td>
		</tr>
		<tr>
			<td>Check Syntax*</td>
			<td> Verifies the formula's syntax. If selected, a pop-up will appear to indicate an error or confirm the syntax has passed.</td>
		</tr>
	</table>




* <span style="font-size:0.90em;font-style: italic;">Only available when right-clicking in the <strong>Formula</strong> column when the cell is in Edit mode. For more information, refer to the <a class="wiki-page" href="#Editing-Formulas">Editing Formulas</a> section.</span>

	<a name="Creating-New-Dynamic-Calculations"></a>
<h2 >Creating New Dynamic Calculations<a href="#Creating-New-Dynamic-Calculations" class="wiki-anchor">&para;</a></h2>


	<p>To create a new dynamic calculation in SolutionBuilder, do the following:</p>


	<ol>
	<li>Right-click on a folder name in the list of dynamic calculations and select <strong>Add</strong>. A blank editing area displays.<br />&nbsp;<br /><span style="font-size: 11px;padding-left: 1.5em;"> <em><strong>New Dynamic Calculation</strong></em></span><br /><img src="attachments/download/127064/44_NewDynamicCalculation.png" style="padding-top:0.5em;padding-bottom:1em;padding-left:1em;" alt="" /><br />&nbsp;</li>
		<li>In the editing area, right-click and select <strong>Add to End</strong>. A new row is added to the dynamic calculation.<br />&nbsp;<br /><span style="font-size: 11px;padding-left: 1.5em;"> <em><strong>Add New Row</strong></em></span><br /><img src="attachments/download/123777/44_AddNewRowDynamicCalculation.png" style="padding-top:0.5em;padding-bottom:1em;padding-left:1em;" alt="" /><br />&nbsp;</li>
		<li>In the editing area, right-click and select either <strong>Insert Before</strong> or <strong>Add to End</strong> to add additional rows.<br />&nbsp;<br /><span style="font-size: 11px;padding-left: 1.5em;"> <em><strong>Add Additional Rows</strong></em></span><br /><img src="attachments/download/123778/44_AddAdditionalRows.png" style="padding-top:0.5em;padding-bottom:1em;padding-left:1em;" alt="" /><br />&nbsp;</li>
		<li>Configure each column's value. Refer to the following table for a description of each column. You can use the helper bar to drag and drop dynamic calculation channels and functions into a cell.</li>
	</ol>


	<p style="font-size: 11px;margin-left: 3em;"><em><strong>Dynamic Calculation Column Descriptions</strong></em></p>


	<table style="margin-left: 2.5em;">
		<tr style="padding-bottom:1em;background:#cccaca;">
			<td style="text-align:left;"><strong>Column</strong></td>
			<td style="text-align:left;"><strong>Description</strong></td>
		</tr>
		<tr>
			<td>Customer Name</td>
			<td> The channel to use for the dynamic calculation. Channels are listed by their customer name, if applicable.</td>
		</tr>
		<tr>
			<td>Alias</td>
			<td> (Read-only) The alias used for the channel. This field is automatically populated when a channel with an alias is selected.</td>
		</tr>
		<tr>
			<td>Units</td>
			<td> (Read-only) The unit type used by the channel. This field is automatically populated from the selected channel.</td>
		</tr>
		<tr>
			<td>Formula</td>
			<td> The formula to run. For more information, refer to the <a class="wiki-page" href="#Editing-Formulas">Editing Formulas</a> section.</td>
		</tr>
	</table>




	<p>&nbsp;</p>


	<a name="Editing-Formulas"></a>
<h3 >Editing Formulas<a href="#Editing-Formulas" class="wiki-anchor">&para;</a></h3>


	<p>Formulas support the use of simple expressions, VCL functions, <code>#if</code> statements, and <code>#if/#else</code> statements. The <code>#if</code> statement is supported for individual calculations and uses the following syntax:<br /><pre>
#if (condition) \ntrue_result\n#endif

or

#if (condition) \ntrue_result\n#else\nfalse_result\n#endif
</pre></p>


	<p>You can use the helper bar to drag and drop dynamic calculation channels and VCL functions into the formula. Alternatively, use the <strong>Insert Channel</strong> and <strong>Insert Function</strong> right-click options to add channels and VCL functions to the formula.</p>


	<p>When the <strong>Insert Function</strong> right-click option is selected, the Dynamic Calculation VCL Functions dialog is launched. Use the drop-down menu to select a function to insert. Upon selecting a function, a description of that function will display below the menu. For more information, refer to the <a class="wiki-page" href="VCL_Math_and_Conversion_Functions.html">VCL Math and Conversion Functions</a>, <a class="wiki-page" href="VCL_Miscellaneous_Functions.html">VCL Miscellaneous Functions</a>, and <a class="wiki-page" href="VCL_Function_List.html">VCL String Functions</a> documentation.</p>


	<p><span style="font-size: 11px;padding-left: 3em;"> <em><strong>Dynamic Calculation VCL Functions Dialog</strong></em></span><br /><img src="attachments/download/117275/43_DynamicCalculationVCLFunctionsDialog.png" style="padding-top:0.5em;padding-bottom:1em;padding-left: 2.30em;" alt="" /><br />&nbsp;</p>
</body>
</html>
